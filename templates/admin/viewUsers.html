

<script>
	$('.page_link').click(function(event){
		// preventing default actions
    
		event.preventDefault();
		var page_no = $(this).attr('href');
    console.log(page_no)
		// ajax call
			$.ajax({
					type: "POST",
					// define url name
					url: "{% url 'viewPatients' %}", 
					data : {    
					page_no : page_no, 
					csrfmiddlewaretoken: '{{ csrf_token }}',
				},
				// handle a successful response
				success: function (response) {
          $('#section_div').html(response) 
        },

				error: function () {
					alert('Error Occured');
				}
			}); 
	}); 

	</script>

<div class="col-md-12 right_side p-3 mb-5   mt-3 mt-3"style="height:400px;">
    <div class="col-md-12 text-center"> <h3 class="headings">Users</h3></div>
    <table class="table table-bordered table-hover">
        <thead>
        <tr>
            <th>Name</th>
            <th>Address</th>
            <th>phone</th>
            <th>Role</th>
            <th>Actions</th>
            
        </tr>
    </thead>
    <tbody>
        {% for i in page_obj %}
        <tr>
            <td style="width:20%">{{i.user_id.username}}</td>
            <td style="width:20%">{{i.address}}</td>
            <td style="width:20%">{{i.phone}}</td>
            <td style="width:20%">{{i.rol_id.name}}</td>
            <td style="width:20%"><button class="btn btn-danger btn-sm" onclick="delete_patient('{{i.id}}')">Remove</button>
                <button class="btn btn-success btn-sm" onclick="assign_role('{{i.id}}')">Add Role</button>
            </td>
        </tr>
        {% endfor %}
        
          
        

    </tbody>
    </table>
    
</div>
<center>
<div class="pagination right_side col-md-6 ">
  <span class="step-links col-md-12 row">
      

      <span class="current col-md-6 mt-2 mb-2 ">
          Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
      </span>
      <div class="col-md-6 ">
      {% if page_obj.has_previous %}
        <div class=" row">
          <a class="page_link m-2" href="1">&laquo; first</a>
          <a class="page_link m-2" href="{{ page_obj.previous_page_number }}">previous</a>
        </div>
      {% endif %}

      {% if page_obj.has_next %}
      <div class=" row">
          <a type="button" class="page_link m-2" href="{{ page_obj.next_page_number }}">next</a>
          <a type="button" class="page_link m-2" href="{{ page_obj.paginator.num_pages }}">last &raquo;</a>
        </div>
      {% endif %}
    </div>
  </span>
</div>
</center>

<div class="modal fade" id="roleModal" tabindex="-1"  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">ROLE</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <label> Role Name</label>
        <select name="rol_name" onchange="viewdep()"  class="rol_name col-md-12" >
          <option> Select role</option>
            {% for i in role %}
            <option value="{{i.id}}">{{i.name}}</option>
            {% endfor %}
        </select>
        <div class=" department_show" style="display:none ;">
          <label>department Name</label>
        <select name="depart_ment"  class="depart_ment col-md-12" >
          <option> Select department</option>
            {% for i in dep %}
            <option value="{{i.id}}">{{i.name}}</option>
            {% endfor %}
        </select>
        </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary " onclick="" id="update_rol">Save changes</button>
        </div>
      </div>
    </div>
  </div>


